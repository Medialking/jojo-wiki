<!DOCTYPE html>
<html>
<head>
    <title>–£–∑–Ω–∞–π —Å–≤–æ–π Google ID</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
</head>
<body style="font-family: Arial; padding: 20px;">
    <h1>üîë –£–∑–Ω–∞–π —Å–≤–æ–π Google User ID</h1>
    
    <div id="loginSection" style="margin: 20px 0;">
        <button onclick="loginWithGoogle()" 
                style="padding: 15px 30px; font-size: 18px; background: #4285f4; color: white; border: none; border-radius: 10px; cursor: pointer;">
            üîê –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
        </button>
    </div>
    
    <div id="userInfo" style="display: none; padding: 20px; background: #f0f8ff; border-radius: 10px; margin-top: 20px;">
        <h2>‚úÖ –¢–≤–æ–π Google User ID:</h2>
        <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid #4285f4; font-family: monospace; font-size: 16px; margin: 10px 0; word-break: break-all;">
            <span id="userId">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
        
        <h3>üìã –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</h3>
        <ol>
            <li>–°–∫–æ–ø–∏—Ä—É–π ID –≤—ã—à–µ</li>
            <li>–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª <code>admin_support.html</code></li>
            <li>–ù–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É: <code>const SUPER_ADMINS = [...]</code></li>
            <li>–í—Å—Ç–∞–≤—å —Å–≤–æ–π ID: <code>'—Ç–≤–æ–π_id_–∑–¥–µ—Å—å'</code></li>
            <li>–°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª</li>
        </ol>
        
        <button onclick="copyToClipboard()" 
                style="padding: 10px 20px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px;">
            üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID
        </button>
    </div>
    
    <div id="status" style="margin-top: 20px; padding: 10px; border-radius: 5px;"></div>

    <script>
        // Firebase –∫–æ–Ω—Ñ–∏–≥
        const firebaseConfig = {
            apiKey: "AIzaSyBwhNixWO8dF_drN2hHVYzfTAbMCiT91Gw",
            authDomain: "jojoland-chat.firebaseapp.com",
            databaseURL: "https://jojoland-chat-default-rtdb.firebaseio.com",
            projectId: "jojoland-chat",
            storageBucket: "jojoland-chat.firebasestorage.app",
            messagingSenderId: "602788305122",
            appId: "1:602788305122:web:c03f5b5ef59c85fc9fe6bb"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        function loginWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            
            auth.signInWithPopup(provider)
                .then((result) => {
                    showUserInfo(result.user);
                })
                .catch((error) => {
                    document.getElementById('status').innerHTML = 
                        `<div style="color: red;">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
                });
        }

        function showUserInfo(user) {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('userInfo').style.display = 'block';
            
            document.getElementById('userId').textContent = user.uid;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
            document.getElementById('status').innerHTML = `
                <div style="background: #e8f5e9; padding: 15px; border-radius: 8px; border: 1px solid #4CAF50;">
                    <strong>‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω!</strong>
                    <br><br>
                    <strong>–ò–º—è:</strong> ${user.displayName || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}
                    <br>
                    <strong>Email:</strong> ${user.email || '–ù–µ —É–∫–∞–∑–∞–Ω'}
                    <br>
                    <strong>ID:</strong> ${user.uid}
                </div>
            `;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
            localStorage.setItem('my_google_id', user.uid);
        }

        function copyToClipboard() {
            const userId = document.getElementById('userId').textContent;
            navigator.clipboard.writeText(userId)
                .then(() => {
                    alert('‚úÖ ID —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
                })
                .catch(err => {
                    alert('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å: ' + err);
                });
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –≤–æ—à–µ–ª –ª–∏ —É–∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
        auth.onAuthStateChanged((user) => {
            if (user) {
                showUserInfo(user);
            }
        });
    </script>
</body>
</html>
