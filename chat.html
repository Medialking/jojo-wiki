<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JojoLand</title>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-purple: #1a0033;
            --secondary-purple: #330066;
            --accent-pink: #ff00ff;
            --accent-blue: #00ccff;
            --accent-green: #00ff99;
            --accent-orange: #ff9900;
            --text-light: #e6e6ff;
            --text-secondary: #b3b3ff;
            --bg-card: rgba(30, 0, 60, 0.8);
            --bg-input: rgba(255, 255, 255, 0.1);
            --glow-pink: 0 0 25px rgba(255, 0, 255, 0.5);
            --glow-blue: 0 0 25px rgba(0, 204, 255, 0.5);
            --glow-green: 0 0 25px rgba(0, 255, 153, 0.5);
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple), #0d001a);
            color: var(--text-light);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }
        
        /* –§–æ–Ω–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
        .bg-effects {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
        }
        
        .floating-msg {
            position: absolute;
            font-size: 24px;
            opacity: 0.1;
            color: var(--accent-pink);
            animation: floatMessage 20s infinite linear;
        }
        
        .floating-msg:nth-child(1) { top: 10%; left: 5%; animation-delay: 0s; }
        .floating-msg:nth-child(2) { top: 25%; right: 8%; animation-delay: 4s; }
        .floating-msg:nth-child(3) { bottom: 30%; left: 10%; animation-delay: 8s; }
        .floating-msg:nth-child(4) { bottom: 20%; right: 15%; animation-delay: 12s; }
        
        @keyframes floatMessage {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(20px, -20px) rotate(90deg); }
            50% { transform: translate(0, 0) rotate(180deg); }
            75% { transform: translate(-20px, 20px) rotate(270deg); }
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
        }
        
        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */
        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }
        
        .title {
            font-size: 3.5rem;
            background: linear-gradient(90deg, var(--accent-pink), var(--accent-blue), var(--accent-pink));
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shineTitle 3s linear infinite;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(255, 0, 255, 0.3);
            font-weight: 800;
            letter-spacing: 1px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.5;
            padding: 0 20px;
        }
        
        @keyframes shineTitle {
            0% { background-position: 0% center; }
            100% { background-position: 200% center; }
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ */
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 25px;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            color: var(--text-light);
            text-decoration: none;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            font-weight: 600;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }
        
        .back-btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        
        .back-btn:hover:before {
            left: 100%;
        }
        
        .back-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--glow-pink);
            border-color: rgba(255, 0, 255, 0.3);
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .support-container {
            background: rgba(20, 0, 40, 0.7);
            border-radius: 25px;
            padding: 40px;
            border: 2px solid rgba(255, 0, 255, 0.3);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(15px);
            position: relative;
            overflow: hidden;
        }
        
        .support-container:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-pink), var(--accent-blue), var(--accent-green));
            z-index: 2;
        }
        
        /* –í—ã–±–æ—Ä —Ç–∏–ø–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è */
        .request-type {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .type-card {
            background: linear-gradient(145deg, rgba(40, 0, 80, 0.6), rgba(20, 0, 40, 0.8));
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .type-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.05) 50%, transparent 70%);
            transform: translateX(-100%);
        }
        
        .type-card:hover:before {
            animation: shineCard 1s forwards;
        }
        
        @keyframes shineCard {
            to {
                transform: translateX(100%);
            }
        }
        
        .type-card:hover, .type-card.active {
            transform: translateY(-10px) scale(1.05);
            box-shadow: var(--glow-pink);
            border-color: var(--accent-pink);
        }
        
        .type-card.complaint:hover { box-shadow: 0 0 30px rgba(255, 153, 0, 0.6); border-color: var(--accent-orange); }
        .type-card.appeal:hover { box-shadow: 0 0 30px rgba(0, 204, 255, 0.6); border-color: var(--accent-blue); }
        .type-card.support:hover { box-shadow: 0 0 30px rgba(0, 255, 153, 0.6); border-color: var(--accent-green); }
        
        .type-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .type-card h3 {
            color: var(--text-light);
            margin-bottom: 10px;
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .type-card p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        /* –§–æ—Ä–º–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è */
        .form-container {
            display: none;
            animation: fadeIn 0.6s ease;
            padding: 30px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            margin-top: 20px;
        }
        
        .form-container.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-title {
            font-size: 1.8rem;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            background: linear-gradient(90deg, var(--accent-pink), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            color: var(--text-light);
            font-weight: 600;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        label i {
            color: var(--accent-pink);
            width: 20px;
            text-align: center;
        }
        
        .input-field, .textarea-field, .select-field {
            width: 100%;
            padding: 18px 20px;
            border: none;
            border-radius: 15px;
            background: var(--bg-input);
            color: var(--text-light);
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .textarea-field {
            min-height: 180px;
            resize: vertical;
        }
        
        .input-field:focus, .textarea-field:focus, .select-field:focus {
            outline: none;
            border-color: var(--accent-pink);
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ */
        .submit-btn {
            display: block;
            width: 100%;
            padding: 22px;
            border: none;
            border-radius: 20px;
            background: linear-gradient(135deg, var(--accent-pink), #cc00cc);
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 10px 30px rgba(255, 0, 204, 0.4);
            position: relative;
            overflow: hidden;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }
        
        .submit-btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #cc00cc, var(--accent-pink));
            z-index: -1;
            opacity: 0;
            transition: opacity 0.4s;
        }
        
        .submit-btn:hover:before {
            opacity: 1;
        }
        
        .submit-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(255, 0, 204, 0.7);
            letter-spacing: 1px;
        }
        
        .submit-btn:active {
            transform: translateY(0);
        }
        
        /* –°—Ç–∞—Ç—É—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ */
        .status-message {
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            margin-top: 25px;
            display: none;
            animation: slideIn 0.5s ease;
            backdrop-filter: blur(10px);
            border: 2px solid;
            position: relative;
            overflow: hidden;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .status-message.success {
            background: rgba(0, 255, 153, 0.1);
            border-color: var(--accent-green);
            display: block;
        }
        
        .status-message.error {
            background: rgba(255, 77, 77, 0.1);
            border-color: #ff4d4d;
            display: block;
        }
        
        .status-message:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-green), transparent);
            animation: progress 5s linear;
        }
        
        .status-message.error:before {
            background: linear-gradient(90deg, #ff4d4d, transparent);
        }
        
        @keyframes progress {
            from { width: 0%; }
            to { width: 100%; }
        }
        
        /* –ú–æ–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è */
        .my-requests {
            margin-top: 50px;
            padding-top: 40px;
            border-top: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .section-title {
            font-size: 2rem;
            margin-bottom: 30px;
            color: var(--text-light);
            display: flex;
            align-items: center;
            gap: 15px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* –°–ø–∏—Å–æ–∫ –æ–±—Ä–∞—â–µ–Ω–∏–π */
        .requests-list {
            display: grid;
            gap: 20px;
            margin-top: 20px;
        }
        
        .request-item {
            background: linear-gradient(145deg, rgba(40, 0, 80, 0.6), rgba(20, 0, 40, 0.8));
            border-radius: 20px;
            padding: 25px;
            border: 2px solid;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            animation: slideUp 0.5s ease;
            backdrop-filter: blur(10px);
        }
        
        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .request-item.complaint { border-color: rgba(255, 153, 0, 0.3); }
        .request-item.appeal { border-color: rgba(0, 204, 255, 0.3); }
        .request-item.support { border-color: rgba(0, 255, 153, 0.3); }
        
        .request-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: var(--accent-pink);
        }
        
        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .request-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .type-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .badge-complaint { background: linear-gradient(135deg, rgba(255, 153, 0, 0.2), rgba(255, 153, 0, 0.1)); color: #ffcc66; border: 1px solid rgba(255, 153, 0, 0.3); }
        .badge-appeal { background: linear-gradient(135deg, rgba(0, 204, 255, 0.2), rgba(0, 204, 255, 0.1)); color: #66ccff; border: 1px solid rgba(0, 204, 255, 0.3); }
        .badge-support { background: linear-gradient(135deg, rgba(0, 255, 153, 0.2), rgba(0, 255, 153, 0.1)); color: #66ffcc; border: 1px solid rgba(0, 255, 153, 0.3); }
        
        .ticket-id {
            color: var(--accent-blue);
            font-weight: 700;
            font-size: 1.1rem;
            font-family: 'Courier New', monospace;
        }
        
        .request-status {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .status-new { background: linear-gradient(135deg, rgba(255, 255, 0, 0.2), rgba(255, 255, 0, 0.1)); color: #ffff66; border: 1px solid rgba(255, 255, 0, 0.3); }
        .status-read { background: linear-gradient(135deg, rgba(0, 255, 0, 0.2), rgba(0, 255, 0, 0.1)); color: #66ff66; border: 1px solid rgba(0, 255, 0, 0.3); }
        .status-closed { background: linear-gradient(135deg, rgba(255, 0, 0, 0.2), rgba(255, 0, 0, 0.1)); color: #ff6666; border: 1px solid rgba(255, 0, 0, 0.3); }
        
        .request-content {
            margin-top: 20px;
        }
        
        .request-description {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: 1rem;
        }
        
        .request-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .request-date {
            color: #9999ff;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* –û—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ */
        .admin-response {
            margin-top: 25px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            border-left: 4px solid var(--accent-green);
            animation: slideInLeft 0.5s ease;
        }
        
        @keyframes slideInLeft {
            from { transform: translateX(-30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .admin-response-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .admin-response-header i {
            color: var(--accent-green);
            font-size: 1.2rem;
        }
        
        .admin-response-text {
            color: #ccffcc;
            line-height: 1.6;
            font-size: 1rem;
        }
        
        .admin-name {
            color: var(--accent-green);
            font-weight: 600;
        }
        
        /* –¢–∞–π–º–µ—Ä —É–¥–∞–ª–µ–Ω–∏—è */
        .delete-timer {
            color: var(--accent-orange);
            font-size: 0.85rem;
            font-weight: 700;
            padding: 6px 12px;
            background: rgba(255, 153, 0, 0.15);
            border-radius: 10px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-left: 15px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .time-left {
            color: #ffff66;
            font-family: 'Courier New', monospace;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 992px) {
            .title {
                font-size: 2.8rem;
            }
            
            .support-container {
                padding: 30px;
            }
            
            .request-type {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            
            .title {
                font-size: 2.3rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
                padding: 0 10px;
            }
            
            .support-container {
                padding: 25px;
            }
            
            .form-container {
                padding: 20px;
            }
            
            .request-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .request-info {
                width: 100%;
                justify-content: space-between;
            }
        }
        
        @media (max-width: 480px) {
            .title {
                font-size: 1.8rem;
            }
            
            .type-card {
                padding: 20px;
            }
            
            .type-icon {
                font-size: 2.5rem;
            }
            
            .form-title {
                font-size: 1.5rem;
            }
            
            .input-field, .textarea-field, .select-field {
                padding: 15px;
            }
            
            .submit-btn {
                padding: 18px;
                font-size: 1.1rem;
            }
        }
        
        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-pink);
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ */
        .empty-state {
            text-align: center;
            padding: 50px 30px;
            color: var(--text-secondary);
        }
        
        .empty-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--text-light);
        }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–∏–∫–∞ */
        .username-notice {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            padding: 15px 25px;
            border-radius: 15px;
            border: 2px solid var(--accent-pink);
            box-shadow: var(--glow-pink);
            z-index: 1000;
            animation: slideUpNotice 0.5s ease;
            display: none;
            backdrop-filter: blur(10px);
            max-width: 350px;
        }
        
        @keyframes slideUpNotice {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .username-notice.show {
            display: block;
        }
    </style>
</head>
<body>
    <!-- –§–æ–Ω–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã -->
    <div class="bg-effects">
        <div class="floating-msg">üí¨</div>
        <div class="floating-msg">üõ°Ô∏è</div>
        <div class="floating-msg">‚öñÔ∏è</div>
        <div class="floating-msg">üí°</div>
    </div>

    <div class="container">
        <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
        <a href="index.html" class="back-btn">
            <i class="fas fa-arrow-left"></i> –ù–∞ –≥–ª–∞–≤–Ω—É—é
        </a>
        
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="header">
            <h1 class="title">üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JojoLand</h1>
            <p class="subtitle">–ú—ã –ø–æ–º–æ–∂–µ–º —Ä–µ—à–∏—Ç—å –ª—é–±—É—é –ø—Ä–æ–±–ª–µ–º—É! –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –æ–±—Ä–∞—â–µ–Ω–∏—è –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É</p>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
        <div class="support-container">
            <!-- –í—ã–±–æ—Ä —Ç–∏–ø–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è -->
            <div class="request-type">
                <div class="type-card complaint" data-type="complaint" onclick="selectType('complaint')">
                    <div class="type-icon">‚ö†Ô∏è</div>
                    <h3>–ñ–∞–ª–æ–±–∞ –Ω–∞ –∏–≥—Ä–æ–∫–∞</h3>
                    <p>–°–æ–æ–±—â–∏—Ç—å –æ –Ω–∞—Ä—É—à–∏—Ç–µ–ª–µ –ø—Ä–∞–≤–∏–ª, —á–∏—Ç–µ—Ä–∞—Ö –∏–ª–∏ —Ç–æ–∫—Å–∏—á–Ω–æ–º –ø–æ–≤–µ–¥–µ–Ω–∏–∏</p>
                </div>
                
                <div class="type-card appeal" data-type="appeal" onclick="selectType('appeal')">
                    <div class="type-icon">‚öñÔ∏è</div>
                    <h3>–ê–ø–µ–ª–ª—è—Ü–∏—è –Ω–∞–∫–∞–∑–∞–Ω–∏—è</h3>
                    <p>–û—Å–ø–æ—Ä–∏—Ç—å –±–∞–Ω, –º—É—Ç –∏–ª–∏ –¥—Ä—É–≥–æ–µ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ</p>
                </div>
                
                <div class="type-card support" data-type="support" onclick="selectType('support')">
                    <div class="type-icon">üí°</div>
                    <h3>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</h3>
                    <p>–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º, –±–∞–≥–∏, –¥–æ–Ω–∞—Ç –∏ –¥—Ä—É–≥–∏–µ –≤–æ–ø—Ä–æ—Å—ã</p>
                </div>
            </div>
            
            <!-- –§–æ—Ä–º–∞ –∂–∞–ª–æ–±—ã -->
            <div id="complaintForm" class="form-container">
                <h2 class="form-title">
                    <i class="fas fa-exclamation-triangle"></i>
                    –§–æ—Ä–º–∞ –∂–∞–ª–æ–±—ã
                </h2>
                <div class="form-group">
                    <label for="complaintUserNickname">
                        <i class="fas fa-user"></i> –í–∞—à –∏–≥—Ä–æ–≤–æ–π –Ω–∏–∫:
                    </label>
                    <input type="text" id="complaintUserNickname" class="input-field" 
                           placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º –≤ –∏–≥—Ä–µ" required>
                </div>
                <div class="form-group">
                    <label for="violatorNickname">
                        <i class="fas fa-user-times"></i> –ù–∏–∫ –Ω–∞—Ä—É—à–∏—Ç–µ–ª—è:
                    </label>
                    <input type="text" id="violatorNickname" class="input-field" 
                           placeholder="–ù–∏–∫ –∏–≥—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ä—É—à–∏–ª –ø—Ä–∞–≤–∏–ª–∞" required>
                </div>
                <div class="form-group">
                    <label for="violationTime">
                        <i class="fas fa-clock"></i> –í—Ä–µ–º—è –Ω–∞—Ä—É—à–µ–Ω–∏—è:
                    </label>
                    <input type="text" id="violationTime" class="input-field" 
                           placeholder="–ü—Ä–∏–º–µ—Ä: 15.12.2023 20:30 (–ú–°–ö)" required>
                </div>
                <div class="form-group">
                    <label for="violationDescription">
                        <i class="fas fa-clipboard-list"></i> –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è:
                    </label>
                    <textarea id="violationDescription" class="textarea-field" 
                              placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏—Ç–µ —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ, –∫–∞–∫ –∏ –ø—Ä–∏ –∫–∞–∫–∏—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞—Ö..." 
                              required></textarea>
                </div>
                <div class="form-group">
                    <label for="complaintProof">
                        <i class="fas fa-camera"></i> –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞:
                    </label>
                    <textarea id="complaintProof" class="textarea-field" 
                              placeholder="–°—Å—ã–ª–∫–∏ –Ω–∞ –≤–∏–¥–µ–æ (YouTube), —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∏–ª–∏ –¥—Ä—É–≥–∏–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –Ω–∞—Ä—É—à–µ–Ω–∏—è..."></textarea>
                </div>
                <button class="submit-btn" onclick="submitComplaint()">
                    <i class="fas fa-paper-plane"></i>
                    üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É
                </button>
            </div>
            
            <!-- –§–æ—Ä–º–∞ –∞–ø–µ–ª–ª—è—Ü–∏–∏ -->
            <div id="appealForm" class="form-container">
                <h2 class="form-title">
                    <i class="fas fa-balance-scale"></i>
                    –§–æ—Ä–º–∞ –∞–ø–µ–ª–ª—è—Ü–∏–∏
                </h2>
                <div class="form-group">
                    <label for="appealUserNickname">
                        <i class="fas fa-user"></i> –í–∞—à –∏–≥—Ä–æ–≤–æ–π –Ω–∏–∫:
                    </label>
                    <input type="text" id="appealUserNickname" class="input-field" 
                           placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º –≤ –∏–≥—Ä–µ" required>
                </div>
                <div class="form-group">
                    <label for="punishmentType">
                        <i class="fas fa-gavel"></i> –¢–∏–ø –Ω–∞–∫–∞–∑–∞–Ω–∏—è:
                    </label>
                    <select id="punishmentType" class="select-field" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –Ω–∞–∫–∞–∑–∞–Ω–∏—è</option>
                        <option value="ban">üî¥ –ë–∞–Ω (–ø–æ–ª–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)</option>
                        <option value="temp_ban">üü° –í—Ä–µ–º–µ–Ω–Ω—ã–π –±–∞–Ω</option>
                        <option value="mute">üîá –ú—É—Ç –≤ —á–∞—Ç–µ</option>
                        <option value="kick">üë¢ –ö–∏–∫ —Å —Å–µ—Ä–≤–µ—Ä–∞</option>
                        <option value="warn">‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</option>
                        <option value="other">‚ùì –î—Ä—É–≥–æ–µ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="punishmentDate">
                        <i class="fas fa-calendar-alt"></i> –î–∞—Ç–∞ –Ω–∞–∫–∞–∑–∞–Ω–∏—è:
                    </label>
                    <input type="text" id="punishmentDate" class="input-field" 
                           placeholder="–ü—Ä–∏–º–µ—Ä: 15.12.2023" required>
                </div>
                <div class="form-group">
                    <label for="appealReason">
                        <i class="fas fa-comment-alt"></i> –ü—Ä–∏—á–∏–Ω–∞ –æ—Å–ø–∞—Ä–∏–≤–∞–Ω–∏—è:
                    </label>
                    <textarea id="appealReason" class="textarea-field" 
                              placeholder="–ü–æ—á–µ–º—É –≤—ã —Å—á–∏—Ç–∞–µ—Ç–µ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–º? –ü–æ–¥—Ä–æ–±–Ω–æ –æ–±—ä—è—Å–Ω–∏—Ç–µ..." 
                              required></textarea>
                </div>
                <div class="form-group">
                    <label for="appealProof">
                        <i class="fas fa-file-video"></i> –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞:
                    </label>
                    <textarea id="appealProof" class="textarea-field" 
                              placeholder="–°—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–ø–∏—Å—å —Å—Ç—Ä–∏–º–∞, —Å–∫—Ä–∏–Ω—à–æ—Ç—ã, —Å–≤–∏–¥–µ—Ç–µ–ª–∏..."></textarea>
                </div>
                <button class="submit-btn" onclick="submitAppeal()">
                    <i class="fas fa-gavel"></i>
                    ‚öñÔ∏è –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–ø–µ–ª–ª—è—Ü–∏—é
                </button>
            </div>
            
            <!-- –§–æ—Ä–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ -->
            <div id="supportForm" class="form-container">
                <h2 class="form-title">
                    <i class="fas fa-headset"></i>
                    –§–æ—Ä–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
                </h2>
                <div class="form-group">
                    <label for="supportUserNickname">
                        <i class="fas fa-user"></i> –í–∞—à –∏–≥—Ä–æ–≤–æ–π –Ω–∏–∫:
                    </label>
                    <input type="text" id="supportUserNickname" class="input-field" 
                           placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º –≤ –∏–≥—Ä–µ" required>
                </div>
                <div class="form-group">
                    <label for="supportCategory">
                        <i class="fas fa-folder"></i> –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø—Ä–æ–±–ª–µ–º—ã:
                    </label>
                    <select id="supportCategory" class="select-field" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                        <option value="connection">üîå –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º</option>
                        <option value="bug">üêõ –ë–∞–≥–∏ –∏ –≥–ª—é–∫–∏</option>
                        <option value="donate">üí∞ –í–æ–ø—Ä–æ—Å—ã –ø–æ –¥–æ–Ω–∞—Ç—É</option>
                        <option value="technical">üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã</option>
                        <option value="suggestion">üí° –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –∏–≥—Ä–µ</option>
                        <option value="other">‚ùì –î—Ä—É–≥–æ–µ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="supportDescription">
                        <i class="fas fa-align-left"></i> –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
                    </label>
                    <textarea id="supportDescription" class="textarea-field" 
                              placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∫–∞–∫ –º–æ–∂–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ..." 
                              required></textarea>
                </div>
                <div class="form-group">
                    <label for="supportProof">
                        <i class="fas fa-info-circle"></i> –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
                    </label>
                    <textarea id="supportProof" class="textarea-field" 
                              placeholder="–õ–æ–≥–∏ –æ—à–∏–±–æ–∫, —Å–∫—Ä–∏–Ω—à–æ—Ç—ã, –≤–µ—Ä—Å–∏—è –∏–≥—Ä—ã, –û–°..."></textarea>
                </div>
                <button class="submit-btn" onclick="submitSupport()">
                    <i class="fas fa-headset"></i>
                    üí¨ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
                </button>
            </div>
            
            <!-- –°—Ç–∞—Ç—É—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
            <div id="statusMessage" class="status-message"></div>
            
            <!-- –ú–æ–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è -->
            <div class="my-requests">
                <h2 class="section-title">
                    <i class="fas fa-history"></i>
                    –ú–æ–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è
                </h2>
                <div id="requestsList">
                    <div class="loading">
                        <div class="loading-spinner"></div>
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –≤–∞—à–∏—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –Ω–∏–∫–∞ -->
    <div id="usernameNotice" class="username-notice">
        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
            <i class="fas fa-check-circle" style="color: var(--accent-green); font-size: 1.2rem;"></i>
            <strong style="color: var(--text-light);">–ù–∏–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!</strong>
        </div>
        <p style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.5;">
            –í–∞—à –Ω–∏–∫–Ω–µ–π–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ. –û–Ω –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å—Å—è –≤ –Ω–æ–≤—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è.
        </p>
    </div>

    <script>
        // ==================== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ====================
        const AUTO_DELETE_DELAY = 5 * 60 * 1000; // 5 –º–∏–Ω—É—Ç –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
        
        const firebaseConfig = {
            apiKey: "AIzaSyBwhNixWO8dF_drN2hHVYzfTAbMCiT91Gw",
            authDomain: "jojoland-chat.firebaseapp.com",
            databaseURL: "https://jojoland-chat-default-rtdb.firebaseio.com",
            projectId: "jojoland-chat",
            storageBucket: "jojoland-chat.firebasestorage.app",
            messagingSenderId: "602788305122",
            appId: "1:602788305122:web:c03f5b5ef59c85fc9fe6bb"
        };
        
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // ==================== –ü–ï–†–ï–ú–ï–ù–ù–´–ï ====================
        let userId = localStorage.getItem('jojoland_userId');
        if (!userId) {
            userId = 'user_' + Math.random().toString(36).substr(2, 12);
            localStorage.setItem('jojoland_userId', userId);
        }
        
        let username = localStorage.getItem('jojoland_username') || 
                       `–ò–≥—Ä–æ–∫_${Math.floor(1000 + Math.random() * 9000)}`;
        let currentFormType = 'complaint';
        
        // ==================== –í–´–ë–û–† –¢–ò–ü–ê –û–ë–†–ê–©–ï–ù–ò–Ø ====================
        function selectType(type) {
            currentFormType = type;
            
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
            document.querySelectorAll('.type-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ
            const selectedCard = document.querySelector(`[data-type="${type}"]`);
            if (selectedCard) {
                selectedCard.classList.add('active');
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞
                selectedCard.style.animation = 'none';
                setTimeout(() => {
                    selectedCard.style.animation = '';
                }, 10);
            }
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Ñ–æ—Ä–º—ã
            document.querySelectorAll('.form-container').forEach(form => {
                form.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é —Ñ–æ—Ä–º—É
            const form = document.getElementById(`${type}Form`);
            if (form) {
                form.classList.add('active');
                
                // –ü–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª –∫ —Ñ–æ—Ä–º–µ
                form.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å —Å–æ–æ–±—â–µ–Ω–∏—è
            hideStatus();
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –Ω–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
            fillNicknameField(type);
        }
        
        function fillNicknameField(type) {
            const form = document.getElementById(`${type}Form`);
            if (!form) return;
            
            const userNicknameField = form.querySelector('input[id$="UserNickname"]');
            if (userNicknameField && !userNicknameField.value) {
                userNicknameField.value = username;
                
                // –≠—Ñ—Ñ–µ–∫—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
                userNicknameField.style.boxShadow = '0 0 15px rgba(0, 204, 255, 0.5)';
                setTimeout(() => {
                    userNicknameField.style.boxShadow = '';
                }, 1000);
            }
        }
        
        // ==================== –û–¢–ü–†–ê–í–ö–ê –§–û–†–ú ====================
        async function submitComplaint() {
            const complaintData = {
                type: 'complaint',
                userNickname: document.getElementById('complaintUserNickname').value.trim(),
                violatorNickname: document.getElementById('violatorNickname').value.trim(),
                violationTime: document.getElementById('violationTime').value.trim(),
                description: document.getElementById('violationDescription').value.trim(),
                proof: document.getElementById('complaintProof').value.trim(),
                userId: userId,
                username: username,
                timestamp: Date.now(),
                status: 'new',
                ticketId: generateTicketId('COMP')
            };
            
            if (!validateComplaint(complaintData)) return;
            
            showLoading(true);
            try {
                await database.ref('support_tickets').push(complaintData);
                showStatus('success', '‚úÖ –ñ–∞–ª–æ–±–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!<br><small>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç –µ—ë –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤.</small>');
                clearForm('complaint');
                saveUsername(complaintData.userNickname);
                loadUserRequests();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:', error);
                showStatus('error', '‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏<br><small>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.</small>');
            } finally {
                showLoading(false);
            }
        }
        
        async function submitAppeal() {
            const appealData = {
                type: 'appeal',
                userNickname: document.getElementById('appealUserNickname').value.trim(),
                punishmentType: document.getElementById('punishmentType').value,
                punishmentDate: document.getElementById('punishmentDate').value.trim(),
                reason: document.getElementById('appealReason').value.trim(),
                proof: document.getElementById('appealProof').value.trim(),
                userId: userId,
                username: username,
                timestamp: Date.now(),
                status: 'new',
                ticketId: generateTicketId('APL')
            };
            
            if (!validateAppeal(appealData)) return;
            
            showLoading(true);
            try {
                await database.ref('support_tickets').push(appealData);
                showStatus('success', '‚úÖ –ê–ø–µ–ª–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!<br><small>–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –æ–±—ã—á–Ω–æ –∑–∞–Ω–∏–º–∞–µ—Ç 1-3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è.</small>');
                clearForm('appeal');
                saveUsername(appealData.userNickname);
                loadUserRequests();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:', error);
                showStatus('error', '‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏<br><small>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.</small>');
            } finally {
                showLoading(false);
            }
        }
        
        async function submitSupport() {
            const supportData = {
                type: 'support',
                userNickname: document.getElementById('supportUserNickname').value.trim(),
                category: document.getElementById('supportCategory').value,
                description: document.getElementById('supportDescription').value.trim(),
                additionalInfo: document.getElementById('supportProof').value.trim(),
                userId: userId,
                username: username,
                timestamp: Date.now(),
                status: 'new',
                ticketId: generateTicketId('SUP')
            };
            
            if (!validateSupport(supportData)) return;
            
            showLoading(true);
            try {
                await database.ref('support_tickets').push(supportData);
                showStatus('success', '‚úÖ –û–±—Ä–∞—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É!<br><small>–û—Ç–≤–µ—Ç–∏–º –≤ —Ç–µ—á–µ–Ω–∏–µ 12 —á–∞—Å–æ–≤.</small>');
                clearForm('support');
                saveUsername(supportData.userNickname);
                loadUserRequests();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:', error);
                showStatus('error', '‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏<br><small>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.</small>');
            } finally {
                showLoading(false);
            }
        }
        
        // ==================== –í–ê–õ–ò–î–ê–¶–ò–Ø ====================
        function validateComplaint(data) {
            if (!data.userNickname || data.userNickname.trim().length < 3) {
                showStatus('error', '‚ùå –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∏–≥—Ä–æ–≤–æ–π –Ω–∏–∫ (–º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞)');
                shakeElement('complaintUserNickname');
                return false;
            }
            
            if (!data.violatorNickname || data.violatorNickname.trim().length < 3) {
                showStatus('error', '‚ùå –í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫ –Ω–∞—Ä—É—à–∏—Ç–µ–ª—è (–º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞)');
                shakeElement('violatorNickname');
                return false;
            }
            
            if (!data.violationTime || data.violationTime.trim() === '') {
                showStatus('error', '‚ùå –£–∫–∞–∂–∏—Ç–µ –≤—Ä–µ–º—è –Ω–∞—Ä—É—à–µ–Ω–∏—è');
                shakeElement('violationTime');
                return false;
            }
            
            if (!data.description || data.description.trim().length < 20) {
                showStatus('error', '‚ùå –û–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–º (–º–∏–Ω–∏–º—É–º 20 —Å–∏–º–≤–æ–ª–æ–≤)');
                shakeElement('violationDescription');
                return false;
            }
            
            return true;
        }
        
        function validateAppeal(data) {
            if (!data.userNickname || data.userNickname.trim().length < 3) {
                showStatus('error', '‚ùå –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∏–≥—Ä–æ–≤–æ–π –Ω–∏–∫ (–º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞)');
                shakeElement('appealUserNickname');
                return false;
            }
            
            if (!data.punishmentType || data.punishmentType.trim() === '') {
                showStatus('error', '‚ùå –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –Ω–∞–∫–∞–∑–∞–Ω–∏—è');
                shakeElement('punishmentType');
                return false;
            }
            
            if (!data.punishmentDate || data.punishmentDate.trim() === '') {
                showStatus('error', '‚ùå –£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É –Ω–∞–∫–∞–∑–∞–Ω–∏—è');
                shakeElement('punishmentDate');
                return false;
            }
            
            if (!data.reason || data.reason.trim().length < 20) {
                showStatus('error', '‚ùå –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–º (–º–∏–Ω–∏–º—É–º 20 —Å–∏–º–≤–æ–ª–æ–≤)');
                shakeElement('appealReason');
                return false;
            }
            
            return true;
        }
        
        function validateSupport(data) {
            if (!data.userNickname || data.userNickname.trim().length < 3) {
                showStatus('error', '‚ùå –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∏–≥—Ä–æ–≤–æ–π –Ω–∏–∫ (–º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞)');
                shakeElement('supportUserNickname');
                return false;
            }
            
            if (!data.category || data.category.trim() === '') {
                showStatus('error', '‚ùå –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø—Ä–æ–±–ª–µ–º—ã');
                shakeElement('supportCategory');
                return false;
            }
            
            if (!data.description || data.description.trim().length < 10) {
                showStatus('error', '‚ùå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–º (–º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤)');
                shakeElement('supportDescription');
                return false;
            }
            
            return true;
        }
        
        function shakeElement(elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                element.style.animation = 'shake 0.5s ease';
                element.focus();
                
                setTimeout(() => {
                    element.style.animation = '';
                }, 500);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ shake
            const style = document.createElement('style');
            style.textContent = `
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                    20%, 40%, 60%, 80% { transform: translateX(5px); }
                }
            `;
            document.head.appendChild(style);
        }
        
        // ==================== –°–¢–ê–¢–£–° –û–¢–ü–†–ê–í–ö–ò ====================
        function showStatus(type, message) {
            const statusDiv = document.getElementById('statusMessage');
            statusDiv.className = `status-message ${type}`;
            statusDiv.innerHTML = message;
            statusDiv.style.display = 'block';
            
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Å—Ç–∞—Ç—É—Å—É
            statusDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                hideStatus();
            }, 5000);
        }
        
        function hideStatus() {
            const statusDiv = document.getElementById('statusMessage');
            if (statusDiv) {
                statusDiv.style.display = 'none';
            }
        }
        
        // ==================== –ó–ê–ì–†–£–ó–ö–ê –û–ë–†–ê–©–ï–ù–ò–ô ====================
        async function loadUserRequests() {
            const requestsList = document.getElementById('requestsList');
            requestsList.innerHTML = `
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –≤–∞—à–∏—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π...</p>
                </div>
            `;
            
            try {
                const snapshot = await database.ref('support_tickets')
                    .orderByChild('userId')
                    .equalTo(userId)
                    .once('value');
                
                if (!snapshot.exists()) {
                    requestsList.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">üì≠</div>
                            <h3>–ù–µ—Ç –æ–±—Ä–∞—â–µ–Ω–∏–π</h3>
                            <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π.<br>–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –≤—ã—à–µ!</p>
                        </div>
                    `;
                    return;
                }
                
                const requests = [];
                snapshot.forEach(childSnapshot => {
                    const request = childSnapshot.val();
                    request.id = childSnapshot.key;
                    requests.push(request);
                });
                
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
                requests.sort((a, b) => b.timestamp - a.timestamp);
                
                let shownTickets = 0;
                let html = '<div class="requests-list">';
                
                requests.forEach(request => {
                    const now = Date.now();
                    const answerTime = request.answerTime || request.timestamp;
                    const timeSinceAnswer = now - answerTime;
                    
                    // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ç–∏–∫–µ—Ç—ã —Å –æ—Ç–≤–µ—Ç–∞–º–∏ —Å—Ç–∞—Ä—à–µ 5 –º–∏–Ω—É—Ç
                    if (request.adminAnswer && timeSinceAnswer > AUTO_DELETE_DELAY) {
                        return;
                    }
                    
                    shownTickets++;
                    
                    const date = new Date(request.timestamp);
                    const dateStr = date.toLocaleDateString('ru-RU') + ' ' + 
                                  date.toLocaleTimeString('ru-RU', {hour: '2-digit', minute:'2-digit'});
                    
                    const typeText = request.type === 'complaint' ? '‚ö†Ô∏è –ñ–∞–ª–æ–±–∞' : 
                                    request.type === 'appeal' ? '‚öñÔ∏è –ê–ø–µ–ª–ª—è—Ü–∏—è' : 'üí° –ü–æ–¥–¥–µ—Ä–∂–∫–∞';
                    
                    const typeClass = request.type === 'complaint' ? 'badge-complaint' : 
                                     request.type === 'appeal' ? 'badge-appeal' : 'badge-support';
                    
                    const statusText = request.status === 'new' ? 'üÜï –ù–æ–≤–æ–µ' : 
                                      request.status === 'read' ? 'üëÅÔ∏è –ü—Ä–æ—á–∏—Ç–∞–Ω–æ' : 
                                      request.status === 'answered' ? 'üì® –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω' : '‚úÖ –ó–∞–∫—Ä—ã—Ç–æ';
                    
                    const statusClass = request.status === 'new' ? 'status-new' : 
                                       request.status === 'read' ? 'status-read' : 'status-closed';
                    
                    // –¢–µ–∫—Å—Ç –æ–±—Ä–∞—â–µ–Ω–∏—è
                    const requestText = request.description || request.reason || request.additionalInfo || '–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è';
                    
                    // –¢–∞–π–º–µ—Ä —É–¥–∞–ª–µ–Ω–∏—è
                    let timerHtml = '';
                    if (request.adminAnswer && timeSinceAnswer < AUTO_DELETE_DELAY) {
                        const timeLeft = AUTO_DELETE_DELAY - timeSinceAnswer;
                        const minutes = Math.floor(timeLeft / 60000);
                        const seconds = Math.floor((timeLeft % 60000) / 1000);
                        timerHtml = `
                            <div class="delete-timer">
                                <i class="fas fa-clock"></i>
                                –û—Ç–≤–µ—Ç —É–¥–∞–ª–∏—Ç—Å—è —á–µ—Ä–µ–∑: 
                                <span class="time-left">${minutes}:${seconds.toString().padStart(2, '0')}</span>
                            </div>
                        `;
                    }
                    
                    html += `
                        <div class="request-item ${request.type}">
                            <div class="request-header">
                                <div class="request-info">
                                    <span class="type-badge ${typeClass}">${typeText}</span>
                                    <span class="ticket-id">${request.ticketId || request.id.substr(0, 8)}</span>
                                    ${timerHtml}
                                </div>
                                <span class="request-status ${statusClass}">${statusText}</span>
                            </div>
                            
                            <div class="request-content">
                                <p class="request-description">${escapeHtml(truncateText(requestText, 200))}</p>
                                
                                ${request.adminAnswer ? `
                                    <div class="admin-response">
                                        <div class="admin-response-header">
                                            <i class="fas fa-reply"></i>
                                            <strong>–û—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong>
                                            <span class="admin-name">${request.adminName || '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä'}</span>
                                        </div>
                                        <p class="admin-response-text">${escapeHtml(request.adminAnswer)}</p>
                                    </div>
                                ` : ''}
                                
                                <div class="request-details">
                                    <span class="request-date">
                                        <i class="far fa-calendar"></i>
                                        ${dateStr}
                                    </span>
                                    
                                    ${request.adminAnswer && timeSinceAnswer < AUTO_DELETE_DELAY ? `
                                        <div style="color: var(--accent-orange); font-size: 0.85rem; font-weight: 600;">
                                            <i class="fas fa-exclamation-triangle"></i>
                                            –û—Ç–≤–µ—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –µ—â–µ ${Math.ceil((AUTO_DELETE_DELAY - timeSinceAnswer)/60000)} –º–∏–Ω
                                        </div>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                
                if (shownTickets === 0) {
                    html = `
                        <div class="empty-state">
                            <div class="empty-icon">üì≠</div>
                            <h3>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π</h3>
                            <p>–í—Å–µ –≤–∞—à–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è –±—ã–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –∏–ª–∏ —É–¥–∞–ª–µ–Ω—ã –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏.</p>
                        </div>
                    `;
                }
                
                requestsList.innerHTML = html;
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–æ–≤
                startTimersUpdate();
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—Ä–∞—â–µ–Ω–∏–π:', error);
                requestsList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">‚ùå</div>
                        <h3>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h3>
                        <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∞—à–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è.<br>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.</p>
                    </div>
                `;
            }
        }
        
        // ==================== –û–ë–ù–û–í–õ–ï–ù–ò–ï –¢–ê–ô–ú–ï–†–û–í ====================
        function startTimersUpdate() {
            setInterval(() => {
                const timers = document.querySelectorAll('.delete-timer .time-left');
                let needsReload = false;
                
                timers.forEach(timer => {
                    const timeText = timer.textContent;
                    const match = timeText.match(/(\d+):(\d+)/);
                    
                    if (match) {
                        let minutes = parseInt(match[1]);
                        let seconds = parseInt(match[2]) - 1;
                        
                        if (seconds < 0) {
                            seconds = 59;
                            minutes -= 1;
                        }
                        
                        if (minutes < 0) {
                            needsReload = true;
                        } else {
                            timer.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                        }
                    }
                });
                
                if (needsReload) {
                    loadUserRequests();
                }
            }, 1000);
        }
        
        // ==================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        function generateTicketId(prefix) {
            const random = Math.random().toString(36).substr(2, 6).toUpperCase();
            const date = new Date();
            const dateStr = date.getDate().toString().padStart(2, '0') + 
                          (date.getMonth() + 1).toString().padStart(2, '0') + 
                          date.getFullYear().toString().substr(2, 2);
            return `${prefix}-${dateStr}-${random}`;
        }
        
        function truncateText(text, maxLength) {
            if (!text) return '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è';
            if (text.length <= maxLength) return text;
            return text.substr(0, maxLength) + '...';
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function clearForm(type) {
            const form = document.getElementById(`${type}Form`);
            if (!form) return;
            
            form.querySelectorAll('input:not([id$="UserNickname"]), textarea, select').forEach(element => {
                element.value = '';
            });
            
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É
            setTimeout(() => {
                selectType(type);
            }, 1000);
        }
        
        function saveUsername(newUsername) {
            if (newUsername && newUsername !== username) {
                username = newUsername;
                localStorage.setItem('jojoland_username', username);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showUsernameNotice();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∏–∫ –≤–æ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ö
                ['complaint', 'appeal', 'support'].forEach(type => {
                    const field = document.getElementById(`${type}UserNickname`);
                    if (field) {
                        field.value = username;
                    }
                });
            }
        }
        
        function showUsernameNotice() {
            const notice = document.getElementById('usernameNotice');
            if (notice) {
                notice.classList.add('show');
                
                setTimeout(() => {
                    notice.classList.remove('show');
                }, 3000);
            }
        }
        
        function showLoading(show) {
            const submitBtn = document.querySelector(`#${currentFormType}Form .submit-btn`);
            if (submitBtn) {
                if (show) {
                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –û—Ç–ø—Ä–∞–≤–∫–∞...';
                    submitBtn.disabled = true;
                } else {
                    const icon = currentFormType === 'complaint' ? 'üì®' :
                                currentFormType === 'appeal' ? '‚öñÔ∏è' : 'üí¨';
                    const text = currentFormType === 'complaint' ? '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É' :
                                currentFormType === 'appeal' ? '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–ø–µ–ª–ª—è—Ü–∏—é' : '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É';
                    submitBtn.innerHTML = `<i class="fas fa-paper-plane"></i> ${icon} ${text}`;
                    submitBtn.disabled = false;
                }
            }
        }
        
        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        document.addEventListener('DOMContentLoaded', () => {
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –Ω–∏–∫ –≤–æ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ö
            ['complaint', 'appeal', 'support'].forEach(type => {
                fillNicknameField(type);
            });
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∏–∫–∞
            const nicknameFields = [
                'complaintUserNickname',
                'appealUserNickname', 
                'supportUserNickname'
            ];
            
            nicknameFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.addEventListener('blur', function() {
                        const newUsername = this.value.trim();
                        if (newUsername && newUsername.length >= 3 && newUsername !== username) {
                            saveUsername(newUsername);
                        }
                    });
                    
                    field.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            this.blur();
                        }
                    });
                }
            });
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–±—Ä–∞—â–µ–Ω–∏—è
            loadUserRequests();
            
            // –í—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—É—é —Ñ–æ—Ä–º—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            selectType('complaint');
            
            // –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
            setTimeout(() => {
                document.body.style.opacity = '1';
            }, 100);
            
            document.body.style.transition = 'opacity 0.5s ease';
            document.body.style.opacity = '0';
        });
    </script>
</body>
</html>
