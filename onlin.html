<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üü¢ –û–Ω–ª–∞–π–Ω —Å–µ—Ä–≤–µ—Ä–∞ JojoLand</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a0033, #330066, #1a0033);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: #ffb3ff;
            text-shadow: 0 0 15px #ff00ff;
            font-size: 36px;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #ccccff;
            font-size: 18px;
            margin-bottom: 20px;
        }
        
        .back-btn {
            display: inline-block;
            margin-bottom: 20px;
            padding: 10px 20px;
            background: rgba(255,0,255,0.2);
            color: #ffb3ff;
            text-decoration: none;
            border-radius: 25px;
            border: 1px solid rgba(255,0,255,0.4);
            transition: 0.3s;
            font-weight: bold;
        }
        
        .back-btn:hover {
            background: rgba(255,0,255,0.4);
            transform: translateY(-2px);
        }
        
        /* –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ */
        .server-status {
            background: rgba(0,0,0,0.6);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            border: 3px solid #ff00ff;
            box-shadow: 0 0 40px rgba(255,0,255,0.4);
            text-align: center;
        }
        
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px 30px;
            border-radius: 20px;
            background: rgba(255,255,255,0.1);
        }
        
        .status-dot {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        .status-online { background: #00ff00; box-shadow: 0 0 20px #00ff00; }
        .status-offline { background: #ff0000; box-shadow: 0 0 20px #ff0000; }
        
        .status-text {
            font-size: 24px;
            font-weight: bold;
        }
        
        .server-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .info-card {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid rgba(255,0,255,0.3);
        }
        
        .info-label {
            color: #ffb3ff;
            font-size: 14px;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .info-value {
            font-size: 24px;
            font-weight: bold;
            color: #6ab7ff;
        }
        
        /* –°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ */
        .players-section {
            background: rgba(0,0,0,0.6);
            border-radius: 25px;
            padding: 30px;
            border: 3px solid #ff00ff;
            box-shadow: 0 0 40px rgba(255,0,255,0.4);
        }
        
        .section-title {
            color: #6ab7ff;
            font-size: 28px;
            margin-bottom: 25px;
            text-align: center;
            text-shadow: 0 0 10px rgba(106, 183, 255, 0.5);
        }
        
        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .player-card {
            background: linear-gradient(135deg, rgba(255,0,255,0.1), rgba(0,150,255,0.1));
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(255,0,255,0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .player-card:hover {
            transform: translateY(-5px);
            border-color: #00ff00;
            box-shadow: 0 0 20px rgba(0,255,0,0.3);
        }
        
        .player-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 10px;
            background: linear-gradient(135deg, #ff00ff, #0066ff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: white;
            text-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        
        .player-name {
            font-size: 16px;
            font-weight: bold;
            color: white;
            margin-bottom: 5px;
            word-break: break-word;
        }
        
        .player-status {
            font-size: 12px;
            color: #00ff00;
            background: rgba(0,255,0,0.1);
            padding: 3px 10px;
            border-radius: 10px;
            display: inline-block;
        }
        
        .no-players {
            text-align: center;
            color: #ff9900;
            font-size: 18px;
            padding: 40px;
            background: rgba(255,153,0,0.1);
            border-radius: 15px;
            border: 2px solid rgba(255,153,0,0.3);
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ */
        .server-details {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
            border-left: 4px solid #00ff00;
        }
        
        .details-title {
            color: #00ff00;
            margin-bottom: 15px;
            font-size: 20px;
        }
        
        .details-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .detail-label {
            color: #ccccff;
        }
        
        .detail-value {
            color: #6ab7ff;
            font-weight: bold;
        }
        
        /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */
        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .control-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            background: linear-gradient(90deg, #0066ff, #0099ff);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            font-size: 16px;
        }
        
        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 20px #0066ff;
        }
        
        .control-btn.refresh {
            background: linear-gradient(90deg, #00cc66, #00ff99);
        }
        
        .control-btn.settings {
            background: linear-gradient(90deg, #ff9900, #ffcc00);
        }
        
        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 28px;
            }
            
            .players-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .server-info-grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .control-btn {
                width: 100%;
            }
        }
    </style>
    
    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Minecraft API -->
    <script src="https://cdn.jsdelivr.net/npm/minecraft-server-util@3.5.0/dist/index.min.js"></script>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-btn">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
        
        <div class="header">
            <h1>üü¢ –û–Ω–ª–∞–π–Ω —Å–µ—Ä–≤–µ—Ä–∞ JojoLand</h1>
            <p class="subtitle">–°–ª–µ–¥–∏—Ç–µ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é –∏–≥—Ä–æ–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</p>
        </div>
        
        <!-- –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ -->
        <div class="server-status">
            <div class="status-indicator">
                <div class="status-dot status-offline" id="statusDot"></div>
                <div class="status-text" id="statusText">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞...</div>
            </div>
            
            <div class="server-info-grid" id="serverInfo">
                <div class="info-card">
                    <div class="info-label">–û–Ω–ª–∞–π–Ω –∏–≥—Ä–æ–∫–æ–≤</div>
                    <div class="info-value" id="onlineCount">0/0</div>
                </div>
                
                <div class="info-card">
                    <div class="info-label">–í–µ—Ä—Å–∏—è</div>
                    <div class="info-value" id="serverVersion">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
                
                <div class="info-card">
                    <div class="info-label">–ü–∏–Ω–≥</div>
                    <div class="info-value" id="serverPing">-</div>
                </div>
                
                <div class="info-card">
                    <div class="info-label">–ö–∞—Ä—Ç–∞</div>
                    <div class="info-value" id="serverMap">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            </div>
        </div>
        
        <!-- –°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ -->
        <div class="players-section">
            <h2 class="section-title">üéÆ –ò–≥—Ä–æ–∫–∏ –æ–Ω–ª–∞–π–Ω</h2>
            
            <div id="playersList">
                <div class="no-players">
                    ‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∏–≥—Ä–æ–∫–æ–≤...
                </div>
            </div>
            
            <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="server-details">
                <h3 class="details-title">üìä –î–µ—Ç–∞–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞</h3>
                <div class="details-list" id="serverDetails">
                    <!-- –î–µ—Ç–∞–ª–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <div class="controls">
                <button class="control-btn refresh" onclick="checkServerStatus()">
                    üîÑ –û–±–Ω–æ–≤–∏—Ç—å
                </button>
                <button class="control-btn settings" onclick="openSettings()">
                    ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </button>
            </div>
        </div>
        
        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div id="settingsModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: center;">
            <div style="background: rgba(0,0,0,0.9); padding: 30px; border-radius: 20px; border: 3px solid #ff00ff; max-width: 500px; width: 90%;">
                <h3 style="color: #ffb3ff; margin-bottom: 20px; text-align: center;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞</h3>
                
                <div class="form-group" style="margin-bottom: 20px;">
                    <label style="color: #ccccff; display: block; margin-bottom: 8px;">IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞:</label>
                    <input type="text" id="serverIP" style="width: 100%; padding: 12px; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; border: 2px solid #ff00ff;" value="jojoland.ru">
                </div>
                
                <div class="form-group" style="margin-bottom: 20px;">
                    <label style="color: #ccccff; display: block; margin-bottom: 8px;">–ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞:</label>
                    <input type="number" id="serverPort" style="width: 100%; padding: 12px; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; border: 2px solid #ff00ff;" value="25565">
                </div>
                
                <div class="form-group" style="margin-bottom: 25px;">
                    <label style="color: #ccccff; display: block; margin-bottom: 8px;">
                        <input type="checkbox" id="autoRefresh" checked> –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫)
                    </label>
                </div>
                
                <div style="display: flex; gap: 15px;">
                    <button onclick="saveSettings()" style="flex: 1; padding: 12px; background: linear-gradient(90deg, #00cc66, #00ff99); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;">
                        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    </button>
                    <button onclick="closeSettings()" style="flex: 1; padding: 12px; background: linear-gradient(90deg, #ff3333, #ff6666); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;">
                        ‚úñ –û—Ç–º–µ–Ω–∞
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ====================
        let serverIP = localStorage.getItem('jojoland_serverIP') || 'jojoland.ru';
        let serverPort = localStorage.getItem('jojoland_serverPort') || 25565;
        let autoRefresh = localStorage.getItem('jojoland_autoRefresh') !== 'false';
        let refreshInterval;
        
        // ==================== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        async function checkServerStatus() {
            try {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
                document.getElementById('statusText').textContent = '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞...';
                document.getElementById('onlineCount').textContent = '0/0';
                document.getElementById('playersList').innerHTML = 
                    '<div class="no-players">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∏–≥—Ä–æ–∫–æ–≤...</div>';
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º CORS –ø—Ä–æ–∫—Å–∏ –¥–ª—è –æ–±—Ö–æ–¥–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –±—Ä–∞—É–∑–µ—Ä–∞
                const proxyUrl = 'https://api.allorigins.win/raw?url=';
                const mcServerUrl = `https://api.mcsrvstat.us/2/${serverIP}:${serverPort}`;
                
                const response = await fetch(proxyUrl + encodeURIComponent(mcServerUrl));
                const data = await response.json();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
                const statusDot = document.getElementById('statusDot');
                const statusText = document.getElementById('statusText');
                
                if (data.online) {
                    statusDot.className = 'status-dot status-online';
                    statusText.textContent = 'üü¢ –°–µ—Ä–≤–µ—Ä –æ–Ω–ª–∞–π–Ω';
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                    updateServerInfo(data);
                    updatePlayersList(data);
                } else {
                    statusDot.className = 'status-dot status-offline';
                    statusText.textContent = 'üî¥ –°–µ—Ä–≤–µ—Ä –æ—Ñ—Ñ–ª–∞–π–Ω';
                    
                    document.getElementById('onlineCount').textContent = '0/0';
                    document.getElementById('serverVersion').textContent = '-';
                    document.getElementById('serverPing').textContent = '-';
                    document.getElementById('serverMap').textContent = '-';
                    
                    document.getElementById('playersList').innerHTML = 
                        '<div class="no-players">üî¥ –°–µ—Ä–≤–µ—Ä –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</div>';
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
                updateLastCheck();
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å–µ—Ä–≤–µ—Ä–∞:', error);
                
                document.getElementById('statusDot').className = 'status-dot status-offline';
                document.getElementById('statusText').textContent = '‚ö† –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è';
                document.getElementById('playersList').innerHTML = 
                    '<div class="no-players">‚ö† –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É</div>';
            }
        }
        
        function updateServerInfo(data) {
            if (data.online) {
                // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤
                const online = data.players?.online || 0;
                const max = data.players?.max || 0;
                document.getElementById('onlineCount').textContent = `${online}/${max}`;
                
                // –í–µ—Ä—Å–∏—è
                const version = data.version || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
                document.getElementById('serverVersion').textContent = version;
                
                // –ü–∏–Ω–≥ (—Å–∏–º—É–ª—è—Ü–∏—è, —Ç–∞–∫ –∫–∞–∫ API –Ω–µ –¥–∞–µ—Ç –ø–∏–Ω–≥)
                document.getElementById('serverPing').textContent = `< 50 –º—Å`;
                
                // –ö–∞—Ä—Ç–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
                const map = data.map || '–û—Å–Ω–æ–≤–Ω–æ–π –º–∏—Ä';
                document.getElementById('serverMap').textContent = map;
                
                // –î–µ—Ç–∞–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞
                updateServerDetails(data);
            }
        }
        
        function updatePlayersList(data) {
            const playersList = document.getElementById('playersList');
            
            if (data.players?.online > 0 && data.players?.list) {
                let html = '<div class="players-grid">';
                
                data.players.list.forEach((player, index) => {
                    const firstLetter = player.charAt(0).toUpperCase();
                    const playerColor = getPlayerColor(index);
                    
                    html += `
                        <div class="player-card fade-in" style="animation-delay: ${index * 0.1}s">
                            <div class="player-avatar" style="background: ${playerColor}">
                                ${firstLetter}
                            </div>
                            <div class="player-name">${player}</div>
                            <div class="player-status">üü¢ –í –∏–≥—Ä–µ</div>
                        </div>
                    `;
                });
                
                html += '</div>';
                playersList.innerHTML = html;
            } else {
                playersList.innerHTML = `
                    <div class="no-players">
                        üëª –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ–∫–∞ –Ω–µ—Ç –∏–≥—Ä–æ–∫–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!
                    </div>
                `;
            }
        }
        
        function updateServerDetails(data) {
            const detailsList = document.getElementById('serverDetails');
            let html = '';
            
            const details = [
                { label: '–ú–æ—Ç–¥ —Å–µ—Ä–≤–µ—Ä–∞', value: data.motd?.clean?.join(' ') || '–ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏' },
                { label: 'IP –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è', value: `${serverIP}:${serverPort}` },
                { label: '–ü—Ä–æ—Ç–æ–∫–æ–ª', value: data.protocol || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' },
                { label: '–•–æ—Å—Ç–∏–Ω–≥', value: data.hostname || serverIP },
                { label: '–ü–æ—Ä—Ç', value: serverPort }
            ];
            
            details.forEach(detail => {
                html += `
                    <div class="detail-item">
                        <span class="detail-label">${detail.label}:</span>
                        <span class="detail-value">${detail.value}</span>
                    </div>
                `;
            });
            
            detailsList.innerHTML = html;
        }
        
        function updateLastCheck() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('ru-RU', { 
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
            const existingDetails = document.getElementById('serverDetails').innerHTML;
            document.getElementById('serverDetails').innerHTML = existingDetails + `
                <div class="detail-item">
                    <span class="detail-label">–ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞:</span>
                    <span class="detail-value">${timeStr}</span>
                </div>
            `;
        }
        
        // ==================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        function getPlayerColor(index) {
            const colors = [
                'linear-gradient(135deg, #ff00ff, #0066ff)',
                'linear-gradient(135deg, #00ff00, #0066ff)',
                'linear-gradient(135deg, #ff9900, #ff0066)',
                'linear-gradient(135deg, #9900ff, #00ccff)',
                'linear-gradient(135deg, #00ff99, #0099ff)',
                'linear-gradient(135deg, #ff0066, #ff9900)',
                'linear-gradient(135deg, #0066ff, #00ffcc)',
                'linear-gradient(135deg, #ff00cc, #9900ff)'
            ];
            return colors[index % colors.length];
        }
        
        function openSettings() {
            document.getElementById('settingsModal').style.display = 'flex';
            document.getElementById('serverIP').value = serverIP;
            document.getElementById('serverPort').value = serverPort;
            document.getElementById('autoRefresh').checked = autoRefresh;
        }
        
        function closeSettings() {
            document.getElementById('settingsModal').style.display = 'none';
        }
        
        function saveSettings() {
            serverIP = document.getElementById('serverIP').value.trim() || 'jojoland.ru';
            serverPort = parseInt(document.getElementById('serverPort').value) || 25565;
            autoRefresh = document.getElementById('autoRefresh').checked;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('jojoland_serverIP', serverIP);
            localStorage.setItem('jojoland_serverPort', serverPort);
            localStorage.setItem('jojoland_autoRefresh', autoRefresh);
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ
            closeSettings();
            
            // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
            setupAutoRefresh();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
            checkServerStatus();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã! –ü—Ä–æ–≤–µ—Ä—è—é –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä...');
        }
        
        function setupAutoRefresh() {
            // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª
            if (refreshInterval) {
                clearInterval(refreshInterval);
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª, –µ—Å–ª–∏ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ
            if (autoRefresh) {
                refreshInterval = setInterval(checkServerStatus, 30000); // 30 —Å–µ–∫—É–Ω–¥
            }
        }
        
        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        document.addEventListener('DOMContentLoaded', () => {
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
            setupAutoRefresh();
            
            // –ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
            checkServerStatus();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ —Å—Ç–∞—Ç—É—Å
            document.querySelector('.status-indicator').addEventListener('click', checkServerStatus);
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            document.getElementById('settingsModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeSettings();
                }
            });
        });
        
        // ==================== –§–û–ù–û–í–ê–Ø –ü–†–û–í–ï–†–ö–ê ====================
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥, –¥–∞–∂–µ –µ—Å–ª–∏ –≤–∫–ª–∞–¥–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                // –í–∫–ª–∞–¥–∫–∞ —Å–∫—Ä—ã—Ç–∞ - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
                if (refreshInterval) {
                    clearInterval(refreshInterval);
                }
            } else {
                // –í–∫–ª–∞–¥–∫–∞ —Å–Ω–æ–≤–∞ –∞–∫—Ç–∏–≤–Ω–∞ - –æ–±–Ω–æ–≤–ª—è–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
                checkServerStatus();
                setupAutoRefresh();
            }
        });
    </script>
</body>
</html>
